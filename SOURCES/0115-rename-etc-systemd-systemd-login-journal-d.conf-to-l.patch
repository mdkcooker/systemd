From 53b92c2c6c80a4a24e538708e58492a03ca6eb7b Mon Sep 17 00:00:00 2001
From: Kay Sievers <kay.sievers@vrfy.org>
Date: Fri, 30 Mar 2012 23:18:33 +0200
Subject: [PATCH 115/115] rename /etc/systemd/systemd-{login,journal}d.conf to
 {login,journal}d.conf

---
 Makefile.am                       |   44 +------
 NEWS                              |    9 ++
 TODO                              |    1 +
 man/journalctl.xml                |    3 +-
 man/journald.conf.xml             |  254 +++++++++++++++++++++++++++++++++++++
 man/loginctl.xml                  |    3 +-
 man/logind.conf.xml               |  175 +++++++++++++++++++++++++
 man/pam_systemd.xml               |    4 +-
 man/systemctl.xml                 |    1 -
 man/systemd-journald.conf.xml     |  254 -------------------------------------
 man/systemd-logind.conf.xml       |  175 -------------------------
 src/journal/journald.c            |    2 +-
 src/journal/journald.conf         |   25 ++++
 src/journal/systemd-journald.conf |   25 ----
 src/login/logind.c                |    2 +-
 src/login/logind.conf             |   16 +++
 src/login/systemd-logind.conf     |   16 ---
 17 files changed, 493 insertions(+), 516 deletions(-)
 create mode 100644 man/journald.conf.xml
 create mode 100644 man/logind.conf.xml
 delete mode 100644 man/systemd-journald.conf.xml
 delete mode 100644 man/systemd-logind.conf.xml
 create mode 100644 src/journal/journald.conf
 delete mode 100644 src/journal/systemd-journald.conf
 create mode 100644 src/login/logind.conf
 delete mode 100644 src/login/systemd-logind.conf

diff --git a/Makefile.am b/Makefile.am
index 820f0b3..472d5ce 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -689,24 +689,18 @@ MANPAGES = \
 	man/sysctl.d.5 \
 	man/systemd-ask-password.1 \
 	man/systemd-cat.1 \
-        man/systemd-machine-id-setup.1 \
-        man/systemd-journald.conf.5 \
-        man/journalctl.1
+	man/systemd-machine-id-setup.1 \
+	man/journald.conf.5 \
+	man/journalctl.1
 
 MANPAGES_ALIAS = \
 	man/reboot.8 \
 	man/poweroff.8 \
-	man/init.1 \
-        man/systemd-systemctl.1 \
-        man/systemd-loginctl.1 \
-        man/systemd-journalctl.1
+	man/init.1
 
 man/reboot.8: man/halt.8
 man/poweroff.8: man/halt.8
 man/init.1: man/systemd.1
-man/systemd-systemctl.1: man/systemctl.1
-man/systemd-loginctl.1: man/loginctl.1
-man/systemd-journalctl.1: man/journalctl.1
 
 XML_FILES = \
 	${patsubst %.1,%.xml,${patsubst %.3,%.xml,${patsubst %.5,%.xml,${patsubst %.7,%.xml,${patsubst %.8,%.xml,$(MANPAGES)}}}}}
@@ -986,14 +980,6 @@ systemctl_LDADD = \
 	libsystemd-id128.la \
 	$(DBUS_LIBS)
 
-systemctl-install-hook:
-	cd $(DESTDIR)$(rootbindir) && \
-		rm -f systemd-systemctl && \
-		$(LN_S) systemctl systemd-systemctl
-
-INSTALL_EXEC_HOOKS += \
-        systemctl-install-hook
-
 systemd_notify_SOURCES = \
 	src/notify.c \
 	src/readahead/sd-readahead.c
@@ -1288,14 +1274,6 @@ journalctl_LDADD += \
 	$(XZ_LIBS)
 endif
 
-journalctl-install-hook:
-	cd $(DESTDIR)$(rootbindir) && \
-		rm -f systemd-journalctl && \
-		$(LN_S) journalctl systemd-journalctl
-
-INSTALL_EXEC_HOOKS += \
-        journalctl-install-hook
-
 test_journal_SOURCES = \
 	src/journal/test-journal.c \
 	src/journal/sd-journal.c \
@@ -1394,7 +1372,7 @@ nodist_systemunit_DATA += \
 	units/systemd-journald.service
 
 dist_pkgsysconf_DATA += \
-	src/journal/systemd-journald.conf
+	src/journal/journald.conf
 
 pkgconfiglib_DATA += \
 	src/journal/libsystemd-journal.pc
@@ -1903,14 +1881,6 @@ loginctl_LDADD = \
 rootbin_PROGRAMS += \
 	loginctl
 
-loginctl-install-hook:
-	cd $(DESTDIR)$(rootbindir) && \
-		rm -f systemd-loginctl && \
-		$(LN_S) loginctl systemd-loginctl
-
-INSTALL_EXEC_HOOKS += \
-        loginctl-install-hook
-
 test_login_SOURCES = \
 	src/login/test-login.c
 
@@ -1995,7 +1965,7 @@ dist_dbuspolicy_DATA += \
 	src/login/org.freedesktop.login1.conf
 
 dist_pkgsysconf_DATA += \
-	src/login/systemd-logind.conf
+	src/login/logind.conf
 
 pkginclude_HEADERS += \
 	src/systemd/sd-login.h
@@ -2072,7 +2042,7 @@ nodist_udevrules_DATA += \
 	src/login/73-seat-late.rules
 
 MANPAGES += \
-	man/systemd-logind.conf.5 \
+	man/logind.conf.5 \
 	man/sd-login.7 \
 	man/loginctl.1 \
 	man/sd_login_monitor_new.3 \
diff --git a/NEWS b/NEWS
index 7991373..c82e637 100644
--- a/NEWS
+++ b/NEWS
@@ -1,5 +1,14 @@
 systemd System and Service Manager
 
+CHANGES WITH:
+        * systemd-logingctl and systemd-journalctl have been renamed
+          to logingctl and journalctl to match systemctl.
+
+        * The config files: /etc/systemd/systemd-logind.conf and
+          /etc/systemd/systemd-journald.conf have been renamed to
+          logind.conf and journald.conf. Package updates should rename
+          the files to the new names on upgrade.
+
 CHANGES WITH 44:
         * This is mostly a bugfix release
 
diff --git a/TODO b/TODO
index d33ae7f..6d461cd 100644
--- a/TODO
+++ b/TODO
@@ -17,6 +17,7 @@ Bugfixes:
 * properly handle .mount unit state tracking when two mount points are stacked one on top of another on the exact same mount point.
 
 Features:
+* cleanup syslog 'priority' vs. 'level' wording
 
 * journald: make configurable "store-on-var", "store-on-run", "dont-store", "auto"
   (store-persistent, store-volatile?)
diff --git a/man/journalctl.xml b/man/journalctl.xml
index c4d2a7e..072b3ae 100644
--- a/man/journalctl.xml
+++ b/man/journalctl.xml
@@ -44,7 +44,6 @@
 
         <refnamediv>
                 <refname>journalctl</refname>
-                <refname>systemd-journalctl</refname>
                 <refpurpose>Query the systemd journal</refpurpose>
         </refnamediv>
 
@@ -246,7 +245,7 @@
                 <para>
                         <citerefentry><refentrytitle>systemd</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
                         <citerefentry><refentrytitle>systemctl</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
-                        <citerefentry><refentrytitle>systemd-journald.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>
+                        <citerefentry><refentrytitle>journald.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>
                 </para>
         </refsect1>
 
diff --git a/man/journald.conf.xml b/man/journald.conf.xml
new file mode 100644
index 0000000..a9b0f66
--- /dev/null
+++ b/man/journald.conf.xml
@@ -0,0 +1,254 @@
+<?xml version='1.0'?> <!--*-nxml-*-->
+<?xml-stylesheet type="text/xsl" href="http://docbook.sourceforge.net/release/xsl/current/xhtml/docbook.xsl"?>
+<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
+        "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
+
+<!--
+  This file is part of systemd.
+
+  Copyright 2010 Lennart Poettering
+
+  systemd is free software; you can redistribute it and/or modify it
+  under the terms of the GNU General Public License as published by
+  the Free Software Foundation; either version 2 of the License, or
+  (at your option) any later version.
+
+  systemd is distributed in the hope that it will be useful, but
+  WITHOUT ANY WARRANTY; without even the implied warranty of
+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+  General Public License for more details.
+
+  You should have received a copy of the GNU General Public License
+  along with systemd; If not, see <http://www.gnu.org/licenses/>.
+-->
+
+<refentry id="journald.conf">
+        <refentryinfo>
+                <title>journald.conf</title>
+                <productname>systemd</productname>
+
+                <authorgroup>
+                        <author>
+                                <contrib>Developer</contrib>
+                                <firstname>Lennart</firstname>
+                                <surname>Poettering</surname>
+                                <email>lennart@poettering.net</email>
+                        </author>
+                </authorgroup>
+        </refentryinfo>
+
+        <refmeta>
+                <refentrytitle>journald.conf</refentrytitle>
+                <manvolnum>5</manvolnum>
+        </refmeta>
+
+        <refnamediv>
+                <refname>journald.conf</refname>
+                <refpurpose>Journal service configuration file</refpurpose>
+        </refnamediv>
+
+        <refsynopsisdiv>
+                <para><filename>journald.conf</filename></para>
+        </refsynopsisdiv>
+
+        <refsect1>
+                <title>Description</title>
+
+                <para>This files configures various parameters of the systemd journal service.</para>
+
+        </refsect1>
+
+        <refsect1>
+                <title>Options</title>
+
+                <para>All options are configured in the
+                <literal>[Journal]</literal> section:</para>
+
+                <variablelist>
+
+                        <varlistentry>
+                                <term><varname>Compress=</varname></term>
+
+                                <listitem><para>Takes a boolean
+                                value. If enabled (the default) data
+                                objects that shall be stored in the
+                                journal and are larger than a certain
+                                threshold are compressed with the XZ
+                                compression algorithm before they are
+                                written to the file
+                                system.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><varname>RateLimitInterval=</varname></term>
+                                <term><varname>RateLimitBurst=</varname></term>
+
+                                <listitem><para>Configures the rate
+                                limiting that is applied to all
+                                messages generated on the system. If
+                                in the time interval defined by
+                                <varname>RateLimitInterval=</varname>
+                                more messages than specified in
+                                <varname>RateLimitBurst=</varname> are
+                                logged by a service all further
+                                messages within the interval are
+                                dropped, until the interval is over. A
+                                message about the number of dropped
+                                messages is generated. This rate
+                                limiting is applied per-service, so
+                                that two services which log do not
+                                interfere with each other's
+                                limit. Defaults to 100 messages in
+                                10s. The time specification for
+                                <varname>RateLimitInterval=</varname>
+                                may be specified in the following
+                                units: <literal>s</literal>,
+                                <literal>min</literal>,
+                                <literal>h</literal>,
+                                <literal>ms</literal>,
+                                <literal>us</literal>. To turn off any
+                                kind of rate limiting, set either
+                                value to 0.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><varname>SystemMaxUse=</varname></term>
+                                <term><varname>SystemKeepFree=</varname></term>
+                                <term><varname>SystemMaxFileSize=</varname></term>
+                                <term><varname>SystemMinFileSize=</varname></term>
+                                <term><varname>RuntimeMaxUse=</varname></term>
+                                <term><varname>RuntimeKeepFree=</varname></term>
+                                <term><varname>RuntimeMaxFileSize=</varname></term>
+                                <term><varname>RuntimeMinFileSize=</varname></term>
+
+                                <listitem><para>Enforce size limits on
+                                the journal files stored. The options
+                                prefixed with
+                                <literal>System</literal> apply to the
+                                journal files when stored on a
+                                persistant file system, more
+                                specifically
+                                <filename>/var/log/journal</filename>. The
+                                options prefixed with
+                                <literal>Runtime</literal> apply to
+                                the journal files when stored on a
+                                volatile in-memory file system, more
+                                specifically
+                                <filename>/run/log/journal</filename>. The
+                                former is used only when
+                                <filename>/var</filename> is mounted,
+                                writable and the directory
+                                <filename>/var/log/journal</filename>
+                                exists. Otherwise only the latter
+                                applies. Note that this means that
+                                during early boot and if the
+                                administrator disabled persistant
+                                logging only the latter options apply,
+                                while the former apply if persistant
+                                logging is enabled and the system is
+                                fully booted
+                                up. <varname>SystemMaxUse=</varname>
+                                and <varname>RuntimeMaxUse=</varname>
+                                control how much disk space the
+                                journal may use up at
+                                maximum. Defaults to 10% of the size
+                                of the respective file
+                                system. <varname>SystemKeepFree=</varname>
+                                and
+                                <varname>RuntimeKeepFree=</varname>
+                                control how much disk space the
+                                journal shall always leave free for
+                                other uses if less than the disk space
+                                configured in
+                                <varname>SystemMaxUse=</varname> and
+                                <varname>RuntimeMaxUse=</varname> is
+                                available. Defaults to 5% of the size
+                                of the respective file
+                                system. <varname>SystemMaxFileSize=</varname>
+                                and
+                                <varname>RuntimeMaxFileSize=</varname>
+                                control how large individual journal
+                                files may grow at maximum. This
+                                influences the granularity in which
+                                disk space is made available through
+                                rotation, i.e. deletion of historic
+                                data. Defaults to one eigth of the
+                                values configured with
+                                <varname>SystemMaxUse=</varname> and
+                                <varname>RuntimeMaxUse=</varname>, so
+                                that usually seven rotated journal
+                                files are kept as
+                                history. <varname>SystemMinFileSize=</varname>
+                                and
+                                <varname>RuntimeMinFileSize=</varname>
+                                control how large individual journal
+                                files grow at minimum. Defaults to
+                                64K. Specify values in bytes or use
+                                K, M, G, T, P, E as units for the
+                                specified sizes. Note that size limits
+                                are enforced synchronously to journal
+                                files as they are extended, and need
+                                no explicit rotation step triggered by
+                                time.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><varname>ForwardToSyslog=</varname></term>
+                                <term><varname>ForwardToKMsg=</varname></term>
+                                <term><varname>ForwardToConsole=</varname></term>
+
+                                <listitem><para>Control whether log
+                                messages received by the journal
+                                daemon shall be forwarded to a
+                                traditional syslog daemon, to the
+                                kernel log buffer (kmsg), or to the
+                                system console. These options take
+                                boolean arguments. If forwarding to
+                                syslog is enabled but no syslog daemon
+                                is running the respective option has
+                                no effect. By default only forwarding
+                                to syslog is enabled. These settings
+                                may be overriden at boot time with the
+                                kernel command line options
+                                <literal>systemd_journald.forward_to_syslog=</literal>,
+                                <literal>systemd_journald.forward_to_kmsg=</literal>
+                                and
+                                <literal>systemd_journald.forward_to_console=</literal>. If
+                                forwarding to the kernel log buffer and
+                                <varname>ImportKernel=</varname> is
+                                enabled at the same time care is taken
+                                to avoid logging loops. It is safe to
+                                use these options in combination.
+                                </para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><varname>ImportKernel=</varname></term>
+
+                                <listitem><para>Controls whether
+                                kernel log messages shall be stored in
+                                the journal. Takes a boolean argument
+                                and defaults to enabled. Note that
+                                currently only one userspace service
+                                can read kernel messages at a time,
+                                which means that kernel log message
+                                reading might get corrupted if it
+                                is enabled in more than one service,
+                                for example in both the journal and a
+                                traditional syslog service.
+                                </para></listitem>
+                        </varlistentry>
+                </variablelist>
+
+        </refsect1>
+
+        <refsect1>
+                  <title>See Also</title>
+                  <para>
+                          <citerefentry><refentrytitle>systemd</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
+                          <citerefentry><refentrytitle>journalctl</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
+                          <citerefentry><refentrytitle>systemd.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>
+                  </para>
+        </refsect1>
+
+</refentry>
diff --git a/man/loginctl.xml b/man/loginctl.xml
index be72cc3..af1d631 100644
--- a/man/loginctl.xml
+++ b/man/loginctl.xml
@@ -44,7 +44,6 @@
 
         <refnamediv>
                 <refname>loginctl</refname>
-                <refname>systemd-loginctl</refname>
                 <refpurpose>Control the systemd login manager</refpurpose>
         </refnamediv>
 
@@ -451,7 +450,7 @@
                 <para>
                         <citerefentry><refentrytitle>systemd</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
                         <citerefentry><refentrytitle>systemctl</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
-                        <citerefentry><refentrytitle>systemd-logind.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>
+                        <citerefentry><refentrytitle>logind.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>
                 </para>
         </refsect1>
 
diff --git a/man/logind.conf.xml b/man/logind.conf.xml
new file mode 100644
index 0000000..950f81f
--- /dev/null
+++ b/man/logind.conf.xml
@@ -0,0 +1,175 @@
+<?xml version='1.0'?> <!--*-nxml-*-->
+<?xml-stylesheet type="text/xsl" href="http://docbook.sourceforge.net/release/xsl/current/xhtml/docbook.xsl"?>
+<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
+        "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
+
+<!--
+  This file is part of systemd.
+
+  Copyright 2010 Lennart Poettering
+
+  systemd is free software; you can redistribute it and/or modify it
+  under the terms of the GNU General Public License as published by
+  the Free Software Foundation; either version 2 of the License, or
+  (at your option) any later version.
+
+  systemd is distributed in the hope that it will be useful, but
+  WITHOUT ANY WARRANTY; without even the implied warranty of
+  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+  General Public License for more details.
+
+  You should have received a copy of the GNU General Public License
+  along with systemd; If not, see <http://www.gnu.org/licenses/>.
+-->
+
+<refentry id="logind.conf">
+        <refentryinfo>
+                <title>logind.conf</title>
+                <productname>systemd</productname>
+
+                <authorgroup>
+                        <author>
+                                <contrib>Developer</contrib>
+                                <firstname>Lennart</firstname>
+                                <surname>Poettering</surname>
+                                <email>lennart@poettering.net</email>
+                        </author>
+                </authorgroup>
+        </refentryinfo>
+
+        <refmeta>
+                <refentrytitle>logind.conf</refentrytitle>
+                <manvolnum>5</manvolnum>
+        </refmeta>
+
+        <refnamediv>
+                <refname>logind.conf</refname>
+                <refpurpose>Login manager configuration file</refpurpose>
+        </refnamediv>
+
+        <refsynopsisdiv>
+                <para><filename>logind.conf</filename></para>
+        </refsynopsisdiv>
+
+        <refsect1>
+                <title>Description</title>
+
+                <para>This files configures various parameters of the systemd login manager.</para>
+
+        </refsect1>
+
+        <refsect1>
+                <title>Options</title>
+
+                <para>All options are configured in the
+                <literal>[Login]</literal> section:</para>
+
+                <variablelist>
+
+                        <varlistentry>
+                                <term><varname>NAutoVTs=</varname></term>
+
+                                <listitem><para>Takes a positive
+                                integer. How many virtual terminals to
+                                allocate by default and when switched
+                                to autospawn <literal>autovt</literal>
+                                services on (if they are otherwise
+                                unused). These services are
+                                instantiated from a template of
+                                <filename>autovt@.service</filename>
+                                with the virtual terminal TTY name,
+                                e.g. <filename>autovt@tty4.service</filename>. By
+                                default
+                                <filename>autovt@.service</filename>
+                                is linked to
+                                <filename>getty@.service</filename>,
+                                i.e. login prompts are started
+                                dynamically as the user switches to
+                                unused virtual terminals, and this
+                                parameter hence controls how many
+                                gettys are available on the virtual
+                                terminals. Defaults to 6. When set to
+                                0, automatic spawning of
+                                <literal>autovt</literal> services is
+                                disabled.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><varname>KillUserProcesses=</varname></term>
+
+                                <listitem><para>Takes a boolean
+                                argument. Configures whether the
+                                processes of a user should be killed
+                                when she or he completely logs out (i.e. after
+                                her/his last session ended). Defaults to
+                                <literal>no</literal>.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><varname>KillOnlyUsers=</varname></term>
+                                <term><varname>KillExcludeUsers=</varname></term>
+
+                                <listitem><para>These settings take
+                                space separated lists of user names
+                                that influence the effect of
+                                <varname>KillUserProcesses=</varname>. If
+                                not empty only processes of users
+                                listed in
+                                <varname>KillOnlyUsers</varname> will
+                                be killed when they log out
+                                entirely. Processes of users listed in
+                                <varname>KillExcludeUsers=</varname>
+                                are excluded from being
+                                killed. <varname>KillExcludeUsers=</varname>
+                                defaults to <literal>root</literal>
+                                and takes precedence over
+                                <varname>KillOnlyUsers=</varname>
+                                which defaults to the empty list.</para></listitem>
+                        </varlistentry>
+
+                        <varlistentry>
+                                <term><varname>Controllers=</varname></term>
+                                <term><varname>ResetControllers=</varname></term>
+
+                                <listitem><para>These settings control
+                                the default control group hierarchies
+                                users logging are added to. When
+                                logging in users will get private
+                                control groups in all hierarchies
+                                listed in
+                                <varname>Controllers=</varname> and be
+                                reset to the root control group in all
+                                hierarchies listed in
+                                <varname>ResetControllers=</varname>. <varname>Controllers=</varname>
+                                defaults to the empty list,
+                                <varname>ResetControllers=</varname>
+                                defaults to
+                                <literal>cpu</literal>.</para></listitem>
+                        </varlistentry>
+                </variablelist>
+
+                <para>Note that setting
+                <varname>KillUserProcesses=1</varname> will break tools
+                like
+                <citerefentry><refentrytitle>screen</refentrytitle><manvolnum>1</manvolnum></citerefentry>.</para>
+
+                <para>Note that <varname>KillUserProcesses=1</varname>
+                is a weaker version of
+                <varname>kill-session-processes=1</varname> which may
+                be configured per-service for
+                <citerefentry><refentrytitle>pam_systemd</refentrytitle><manvolnum>8</manvolnum></citerefentry>. The
+                latter kills processes of a session as soon as it
+                ends, the former kills processes as soon as the last
+                session of the user ends.</para>
+        </refsect1>
+
+        <refsect1>
+                  <title>See Also</title>
+                  <para>
+                          <citerefentry><refentrytitle>systemd</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
+                          <citerefentry><refentrytitle>loginctl</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
+                          <citerefentry><refentrytitle>systemd.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>
+                  </para>
+        </refsect1>
+
+</refentry>
diff --git a/man/pam_systemd.xml b/man/pam_systemd.xml
index 883b50b..c07b46b 100644
--- a/man/pam_systemd.xml
+++ b/man/pam_systemd.xml
@@ -212,7 +212,7 @@
                 stricter version of
                 <varname>KillUserProcesses=1</varname> which may be
                 configured system-wide in
-                <citerefentry><refentrytitle>systemd-logind.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>. The
+                <citerefentry><refentrytitle>logind.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>. The
                 former kills processes of a session as soon as it
                 ends, the latter kills processes as soon as the last
                 session of the user ends.</para>
@@ -308,7 +308,7 @@ session    required     pam_systemd.so kill-session-processes=1</programlisting>
                         <citerefentry><refentrytitle>pam.d</refentrytitle><manvolnum>5</manvolnum></citerefentry>,
                         <citerefentry><refentrytitle>pam</refentrytitle><manvolnum>8</manvolnum></citerefentry>,
                         <citerefentry><refentrytitle>pam_loginuid</refentrytitle><manvolnum>8</manvolnum></citerefentry>,
-                        <citerefentry><refentrytitle>systemd-logind.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>,
+                        <citerefentry><refentrytitle>logind.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>,
                         <citerefentry><refentrytitle>systemd</refentrytitle><manvolnum>1</manvolnum></citerefentry>
                 </para>
         </refsect1>
diff --git a/man/systemctl.xml b/man/systemctl.xml
index ffe0164..167a72b 100644
--- a/man/systemctl.xml
+++ b/man/systemctl.xml
@@ -44,7 +44,6 @@
 
         <refnamediv>
                 <refname>systemctl</refname>
-                <refname>systemd-systemctl</refname>
                 <refpurpose>Control the systemd system and service manager</refpurpose>
         </refnamediv>
 
diff --git a/man/systemd-journald.conf.xml b/man/systemd-journald.conf.xml
deleted file mode 100644
index 37dae68..0000000
--- a/man/systemd-journald.conf.xml
+++ /dev/null
@@ -1,254 +0,0 @@
-<?xml version='1.0'?> <!--*-nxml-*-->
-<?xml-stylesheet type="text/xsl" href="http://docbook.sourceforge.net/release/xsl/current/xhtml/docbook.xsl"?>
-<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
-        "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
-
-<!--
-  This file is part of systemd.
-
-  Copyright 2010 Lennart Poettering
-
-  systemd is free software; you can redistribute it and/or modify it
-  under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  systemd is distributed in the hope that it will be useful, but
-  WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
-  General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with systemd; If not, see <http://www.gnu.org/licenses/>.
--->
-
-<refentry id="systemd-journald.conf">
-        <refentryinfo>
-                <title>systemd-journald.conf</title>
-                <productname>systemd</productname>
-
-                <authorgroup>
-                        <author>
-                                <contrib>Developer</contrib>
-                                <firstname>Lennart</firstname>
-                                <surname>Poettering</surname>
-                                <email>lennart@poettering.net</email>
-                        </author>
-                </authorgroup>
-        </refentryinfo>
-
-        <refmeta>
-                <refentrytitle>systemd-journald.conf</refentrytitle>
-                <manvolnum>5</manvolnum>
-        </refmeta>
-
-        <refnamediv>
-                <refname>systemd-journald.conf</refname>
-                <refpurpose>Journal service configuration file</refpurpose>
-        </refnamediv>
-
-        <refsynopsisdiv>
-                <para><filename>systemd-journald.conf</filename></para>
-        </refsynopsisdiv>
-
-        <refsect1>
-                <title>Description</title>
-
-                <para>This files configures various parameters of the systemd journal service.</para>
-
-        </refsect1>
-
-        <refsect1>
-                <title>Options</title>
-
-                <para>All options are configured in the
-                <literal>[Journal]</literal> section:</para>
-
-                <variablelist>
-
-                        <varlistentry>
-                                <term><varname>Compress=</varname></term>
-
-                                <listitem><para>Takes a boolean
-                                value. If enabled (the default) data
-                                objects that shall be stored in the
-                                journal and are larger than a certain
-                                threshold are compressed with the XZ
-                                compression algorithm before they are
-                                written to the file
-                                system.</para></listitem>
-                        </varlistentry>
-
-                        <varlistentry>
-                                <term><varname>RateLimitInterval=</varname></term>
-                                <term><varname>RateLimitBurst=</varname></term>
-
-                                <listitem><para>Configures the rate
-                                limiting that is applied to all
-                                messages generated on the system. If
-                                in the time interval defined by
-                                <varname>RateLimitInterval=</varname>
-                                more messages than specified in
-                                <varname>RateLimitBurst=</varname> are
-                                logged by a service all further
-                                messages within the interval are
-                                dropped, until the interval is over. A
-                                message about the number of dropped
-                                messages is generated. This rate
-                                limiting is applied per-service, so
-                                that two services which log do not
-                                interfere with each other's
-                                limit. Defaults to 100 messages in
-                                10s. The time specification for
-                                <varname>RateLimitInterval=</varname>
-                                may be specified in the following
-                                units: <literal>s</literal>,
-                                <literal>min</literal>,
-                                <literal>h</literal>,
-                                <literal>ms</literal>,
-                                <literal>us</literal>. To turn off any
-                                kind of rate limiting, set either
-                                value to 0.</para></listitem>
-                        </varlistentry>
-
-                        <varlistentry>
-                                <term><varname>SystemMaxUse=</varname></term>
-                                <term><varname>SystemKeepFree=</varname></term>
-                                <term><varname>SystemMaxFileSize=</varname></term>
-                                <term><varname>SystemMinFileSize=</varname></term>
-                                <term><varname>RuntimeMaxUse=</varname></term>
-                                <term><varname>RuntimeKeepFree=</varname></term>
-                                <term><varname>RuntimeMaxFileSize=</varname></term>
-                                <term><varname>RuntimeMinFileSize=</varname></term>
-
-                                <listitem><para>Enforce size limits on
-                                the journal files stored. The options
-                                prefixed with
-                                <literal>System</literal> apply to the
-                                journal files when stored on a
-                                persistant file system, more
-                                specifically
-                                <filename>/var/log/journal</filename>. The
-                                options prefixed with
-                                <literal>Runtime</literal> apply to
-                                the journal files when stored on a
-                                volatile in-memory file system, more
-                                specifically
-                                <filename>/run/log/journal</filename>. The
-                                former is used only when
-                                <filename>/var</filename> is mounted,
-                                writable and the directory
-                                <filename>/var/log/journal</filename>
-                                exists. Otherwise only the latter
-                                applies. Note that this means that
-                                during early boot and if the
-                                administrator disabled persistant
-                                logging only the latter options apply,
-                                while the former apply if persistant
-                                logging is enabled and the system is
-                                fully booted
-                                up. <varname>SystemMaxUse=</varname>
-                                and <varname>RuntimeMaxUse=</varname>
-                                control how much disk space the
-                                journal may use up at
-                                maximum. Defaults to 10% of the size
-                                of the respective file
-                                system. <varname>SystemKeepFree=</varname>
-                                and
-                                <varname>RuntimeKeepFree=</varname>
-                                control how much disk space the
-                                journal shall always leave free for
-                                other uses if less than the disk space
-                                configured in
-                                <varname>SystemMaxUse=</varname> and
-                                <varname>RuntimeMaxUse=</varname> is
-                                available. Defaults to 5% of the size
-                                of the respective file
-                                system. <varname>SystemMaxFileSize=</varname>
-                                and
-                                <varname>RuntimeMaxFileSize=</varname>
-                                control how large individual journal
-                                files may grow at maximum. This
-                                influences the granularity in which
-                                disk space is made available through
-                                rotation, i.e. deletion of historic
-                                data. Defaults to one eigth of the
-                                values configured with
-                                <varname>SystemMaxUse=</varname> and
-                                <varname>RuntimeMaxUse=</varname>, so
-                                that usually seven rotated journal
-                                files are kept as
-                                history. <varname>SystemMinFileSize=</varname>
-                                and
-                                <varname>RuntimeMinFileSize=</varname>
-                                control how large individual journal
-                                files grow at minimum. Defaults to
-                                64K. Specify values in bytes or use
-                                K, M, G, T, P, E as units for the
-                                specified sizes. Note that size limits
-                                are enforced synchronously to journal
-                                files as they are extended, and need
-                                no explicit rotation step triggered by
-                                time.</para></listitem>
-                        </varlistentry>
-
-                        <varlistentry>
-                                <term><varname>ForwardToSyslog=</varname></term>
-                                <term><varname>ForwardToKMsg=</varname></term>
-                                <term><varname>ForwardToConsole=</varname></term>
-
-                                <listitem><para>Control whether log
-                                messages received by the journal
-                                daemon shall be forwarded to a
-                                traditional syslog daemon, to the
-                                kernel log buffer (kmsg), or to the
-                                system console. These options take
-                                boolean arguments. If forwarding to
-                                syslog is enabled but no syslog daemon
-                                is running the respective option has
-                                no effect. By default only forwarding
-                                to syslog is enabled. These settings
-                                may be overriden at boot time with the
-                                kernel command line options
-                                <literal>systemd_journald.forward_to_syslog=</literal>,
-                                <literal>systemd_journald.forward_to_kmsg=</literal>
-                                and
-                                <literal>systemd_journald.forward_to_console=</literal>. If
-                                forwarding to the kernel log buffer and
-                                <varname>ImportKernel=</varname> is
-                                enabled at the same time care is taken
-                                to avoid logging loops. It is safe to
-                                use these options in combination.
-                                </para></listitem>
-                        </varlistentry>
-
-                        <varlistentry>
-                                <term><varname>ImportKernel=</varname></term>
-
-                                <listitem><para>Controls whether
-                                kernel log messages shall be stored in
-                                the journal. Takes a boolean argument
-                                and defaults to enabled. Note that
-                                currently only one userspace service
-                                can read kernel messages at a time,
-                                which means that kernel log message
-                                reading might get corrupted if it
-                                is enabled in more than one service,
-                                for example in both the journal and a
-                                traditional syslog service.
-                                </para></listitem>
-                        </varlistentry>
-                </variablelist>
-
-        </refsect1>
-
-        <refsect1>
-                  <title>See Also</title>
-                  <para>
-                          <citerefentry><refentrytitle>systemd</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
-                          <citerefentry><refentrytitle>journalctl</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
-                          <citerefentry><refentrytitle>systemd.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>
-                  </para>
-        </refsect1>
-
-</refentry>
diff --git a/man/systemd-logind.conf.xml b/man/systemd-logind.conf.xml
deleted file mode 100644
index 27c11c2..0000000
--- a/man/systemd-logind.conf.xml
+++ /dev/null
@@ -1,175 +0,0 @@
-<?xml version='1.0'?> <!--*-nxml-*-->
-<?xml-stylesheet type="text/xsl" href="http://docbook.sourceforge.net/release/xsl/current/xhtml/docbook.xsl"?>
-<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
-        "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
-
-<!--
-  This file is part of systemd.
-
-  Copyright 2010 Lennart Poettering
-
-  systemd is free software; you can redistribute it and/or modify it
-  under the terms of the GNU General Public License as published by
-  the Free Software Foundation; either version 2 of the License, or
-  (at your option) any later version.
-
-  systemd is distributed in the hope that it will be useful, but
-  WITHOUT ANY WARRANTY; without even the implied warranty of
-  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
-  General Public License for more details.
-
-  You should have received a copy of the GNU General Public License
-  along with systemd; If not, see <http://www.gnu.org/licenses/>.
--->
-
-<refentry id="systemd-logind.conf">
-        <refentryinfo>
-                <title>systemd-logind.conf</title>
-                <productname>systemd</productname>
-
-                <authorgroup>
-                        <author>
-                                <contrib>Developer</contrib>
-                                <firstname>Lennart</firstname>
-                                <surname>Poettering</surname>
-                                <email>lennart@poettering.net</email>
-                        </author>
-                </authorgroup>
-        </refentryinfo>
-
-        <refmeta>
-                <refentrytitle>systemd-logind.conf</refentrytitle>
-                <manvolnum>5</manvolnum>
-        </refmeta>
-
-        <refnamediv>
-                <refname>systemd-logind.conf</refname>
-                <refpurpose>Login manager configuration file</refpurpose>
-        </refnamediv>
-
-        <refsynopsisdiv>
-                <para><filename>systemd-logind.conf</filename></para>
-        </refsynopsisdiv>
-
-        <refsect1>
-                <title>Description</title>
-
-                <para>This files configures various parameters of the systemd login manager.</para>
-
-        </refsect1>
-
-        <refsect1>
-                <title>Options</title>
-
-                <para>All options are configured in the
-                <literal>[Login]</literal> section:</para>
-
-                <variablelist>
-
-                        <varlistentry>
-                                <term><varname>NAutoVTs=</varname></term>
-
-                                <listitem><para>Takes a positive
-                                integer. How many virtual terminals to
-                                allocate by default and when switched
-                                to autospawn <literal>autovt</literal>
-                                services on (if they are otherwise
-                                unused). These services are
-                                instantiated from a template of
-                                <filename>autovt@.service</filename>
-                                with the virtual terminal TTY name,
-                                e.g. <filename>autovt@tty4.service</filename>. By
-                                default
-                                <filename>autovt@.service</filename>
-                                is linked to
-                                <filename>getty@.service</filename>,
-                                i.e. login prompts are started
-                                dynamically as the user switches to
-                                unused virtual terminals, and this
-                                parameter hence controls how many
-                                gettys are available on the virtual
-                                terminals. Defaults to 6. When set to
-                                0, automatic spawning of
-                                <literal>autovt</literal> services is
-                                disabled.</para></listitem>
-                        </varlistentry>
-
-                        <varlistentry>
-                                <term><varname>KillUserProcesses=</varname></term>
-
-                                <listitem><para>Takes a boolean
-                                argument. Configures whether the
-                                processes of a user should be killed
-                                when she or he completely logs out (i.e. after
-                                her/his last session ended). Defaults to
-                                <literal>no</literal>.</para></listitem>
-                        </varlistentry>
-
-                        <varlistentry>
-                                <term><varname>KillOnlyUsers=</varname></term>
-                                <term><varname>KillExcludeUsers=</varname></term>
-
-                                <listitem><para>These settings take
-                                space separated lists of user names
-                                that influence the effect of
-                                <varname>KillUserProcesses=</varname>. If
-                                not empty only processes of users
-                                listed in
-                                <varname>KillOnlyUsers</varname> will
-                                be killed when they log out
-                                entirely. Processes of users listed in
-                                <varname>KillExcludeUsers=</varname>
-                                are excluded from being
-                                killed. <varname>KillExcludeUsers=</varname>
-                                defaults to <literal>root</literal>
-                                and takes precedence over
-                                <varname>KillOnlyUsers=</varname>
-                                which defaults to the empty list.</para></listitem>
-                        </varlistentry>
-
-                        <varlistentry>
-                                <term><varname>Controllers=</varname></term>
-                                <term><varname>ResetControllers=</varname></term>
-
-                                <listitem><para>These settings control
-                                the default control group hierarchies
-                                users logging are added to. When
-                                logging in users will get private
-                                control groups in all hierarchies
-                                listed in
-                                <varname>Controllers=</varname> and be
-                                reset to the root control group in all
-                                hierarchies listed in
-                                <varname>ResetControllers=</varname>. <varname>Controllers=</varname>
-                                defaults to the empty list,
-                                <varname>ResetControllers=</varname>
-                                defaults to
-                                <literal>cpu</literal>.</para></listitem>
-                        </varlistentry>
-                </variablelist>
-
-                <para>Note that setting
-                <varname>KillUserProcesses=1</varname> will break tools
-                like
-                <citerefentry><refentrytitle>screen</refentrytitle><manvolnum>1</manvolnum></citerefentry>.</para>
-
-                <para>Note that <varname>KillUserProcesses=1</varname>
-                is a weaker version of
-                <varname>kill-session-processes=1</varname> which may
-                be configured per-service for
-                <citerefentry><refentrytitle>pam_systemd</refentrytitle><manvolnum>8</manvolnum></citerefentry>. The
-                latter kills processes of a session as soon as it
-                ends, the former kills processes as soon as the last
-                session of the user ends.</para>
-        </refsect1>
-
-        <refsect1>
-                  <title>See Also</title>
-                  <para>
-                          <citerefentry><refentrytitle>systemd</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
-                          <citerefentry><refentrytitle>loginctl</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
-                          <citerefentry><refentrytitle>systemd.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>
-                  </para>
-        </refsect1>
-
-</refentry>
diff --git a/src/journal/journald.c b/src/journal/journald.c
index 87390bd..60ba1d7 100644
--- a/src/journal/journald.c
+++ b/src/journal/journald.c
@@ -2583,7 +2583,7 @@ static int server_parse_config_file(Server *s) {
 
         assert(s);
 
-        fn = "/etc/systemd/systemd-journald.conf";
+        fn = "/etc/systemd/journald.conf";
         f = fopen(fn, "re");
         if (!f) {
                 if (errno == ENOENT)
diff --git a/src/journal/journald.conf b/src/journal/journald.conf
new file mode 100644
index 0000000..710b0aa
--- /dev/null
+++ b/src/journal/journald.conf
@@ -0,0 +1,25 @@
+#  This file is part of systemd.
+#
+#  systemd is free software; you can redistribute it and/or modify it
+#  under the terms of the GNU General Public License as published by
+#  the Free Software Foundation; either version 2 of the License, or
+#  (at your option) any later version.
+#
+# See system-journald.conf(5) for details
+
+[Journal]
+#Compress=yes
+#RateLimitInterval=10s
+#RateLimitBurst=200
+#SystemMaxUse=
+#SystemKeepFree=
+#SystemMaxFileSize=
+#SystemMinFileSize=
+#RuntimeMaxUse=
+#RuntimeKeepFree=
+#RuntimeMaxFileSize=
+#RuntimeMinFileSize=
+#ForwardToSyslog=yes
+#ForwardToKMsg=no
+#ForwardToConsole=no
+#ImportKernel=yes
diff --git a/src/journal/systemd-journald.conf b/src/journal/systemd-journald.conf
deleted file mode 100644
index 710b0aa..0000000
--- a/src/journal/systemd-journald.conf
+++ /dev/null
@@ -1,25 +0,0 @@
-#  This file is part of systemd.
-#
-#  systemd is free software; you can redistribute it and/or modify it
-#  under the terms of the GNU General Public License as published by
-#  the Free Software Foundation; either version 2 of the License, or
-#  (at your option) any later version.
-#
-# See system-journald.conf(5) for details
-
-[Journal]
-#Compress=yes
-#RateLimitInterval=10s
-#RateLimitBurst=200
-#SystemMaxUse=
-#SystemKeepFree=
-#SystemMaxFileSize=
-#SystemMinFileSize=
-#RuntimeMaxUse=
-#RuntimeKeepFree=
-#RuntimeMaxFileSize=
-#RuntimeMinFileSize=
-#ForwardToSyslog=yes
-#ForwardToKMsg=no
-#ForwardToConsole=no
-#ImportKernel=yes
diff --git a/src/login/logind.c b/src/login/logind.c
index 7fd6515..777d912 100644
--- a/src/login/logind.c
+++ b/src/login/logind.c
@@ -1216,7 +1216,7 @@ static int manager_parse_config_file(Manager *m) {
 
         assert(m);
 
-        fn = "/etc/systemd/systemd-logind.conf";
+        fn = "/etc/systemd/logind.conf";
         f = fopen(fn, "re");
         if (!f) {
                 if (errno == ENOENT)
diff --git a/src/login/logind.conf b/src/login/logind.conf
new file mode 100644
index 0000000..24b9d77
--- /dev/null
+++ b/src/login/logind.conf
@@ -0,0 +1,16 @@
+#  This file is part of systemd.
+#
+#  systemd is free software; you can redistribute it and/or modify it
+#  under the terms of the GNU General Public License as published by
+#  the Free Software Foundation; either version 2 of the License, or
+#  (at your option) any later version.
+#
+# See logind.conf(5) for details
+
+[Login]
+#NAutoVTs=6
+#KillUserProcesses=no
+#KillOnlyUsers=
+#KillExcludeUsers=root
+#Controllers=
+#ResetControllers=cpu
diff --git a/src/login/systemd-logind.conf b/src/login/systemd-logind.conf
deleted file mode 100644
index a8d9833..0000000
--- a/src/login/systemd-logind.conf
+++ /dev/null
@@ -1,16 +0,0 @@
-#  This file is part of systemd.
-#
-#  systemd is free software; you can redistribute it and/or modify it
-#  under the terms of the GNU General Public License as published by
-#  the Free Software Foundation; either version 2 of the License, or
-#  (at your option) any later version.
-#
-# See systemd-logind.conf(5) for details
-
-[Login]
-#NAutoVTs=6
-#KillUserProcesses=no
-#KillOnlyUsers=
-#KillExcludeUsers=root
-#Controllers=
-#ResetControllers=cpu
-- 
1.7.9.3

