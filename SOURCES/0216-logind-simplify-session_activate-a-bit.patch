From d4b345a3f70295d3d36ac505900fc6fd32d2c7d3 Mon Sep 17 00:00:00 2001
From: Lennart Poettering <lennart@poettering.net>
Date: Tue, 17 Jan 2012 14:02:47 +0100
Subject: [PATCH 216/217] logind: simplify session_activate() a bit (cherry
 picked from commit
 129eebe020118fc1bf0274c9ea75ffb6178a280f)

---
 src/login/logind-session.c |    6 +-----
 src/login/logind-user.c    |    2 ++
 2 files changed, 3 insertions(+), 5 deletions(-)

diff --git a/src/login/logind-session.c b/src/login/logind-session.c
index 58c70c3..e78af02 100644
--- a/src/login/logind-session.c
+++ b/src/login/logind-session.c
@@ -324,7 +324,6 @@ finish:
 
 int session_activate(Session *s) {
         int r;
-        Session *old_active;
 
         assert(s);
 
@@ -343,10 +342,7 @@ int session_activate(Session *s) {
         if (r < 0)
                 return r;
 
-        old_active = s->seat->active;
-        s->seat->active = s;
-
-        return seat_apply_acls(s->seat, old_active);
+        return seat_set_active(s->seat, s);
 }
 
 static int session_link_x11_socket(Session *s) {
diff --git a/src/login/logind-user.c b/src/login/logind-user.c
index 432d609..717f0e2 100644
--- a/src/login/logind-user.c
+++ b/src/login/logind-user.c
@@ -299,6 +299,8 @@ static int user_create_cgroup(User *u) {
 static int user_start_service(User *u) {
         assert(u);
 
+        /* FIXME: Fill me in later ... */
+
         return 0;
 }
 
-- 
1.7.8.3

